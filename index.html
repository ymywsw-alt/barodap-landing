<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>바로답</title>
</head>

<body style="font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; max-width:720px; margin:0 auto; padding:16px;">

  <h1>바로답</h1>
  <p>이해 안 되는 걸 보내면, 지금 할 한 가지를 바로 알려줍니다.</p>

  <!-- 텍스트 입력 -->
  <label style="font-weight:700;">문장을 그대로 붙여넣으세요</label>
  <textarea
    id="text"
    rows="6"
    placeholder="예) ‘납부 기한이 경과되었습니다’ 이게 무슨 뜻이죠?"
    style="width:100%; margin-top:8px; padding:12px; font-size:16px; border-radius:12px; border:1px solid #ddd;"
  ></textarea>

  <!-- 사진 입력 버튼 -->
  <div style="margin-top:12px; display:flex; gap:10px;">
    <input
      id="img"
      type="file"
      accept="image/*"
      capture="environment"
      style="display:none"
    />
    <button
      id="photo"
      onclick="document.getElementById('img').click()"
      style="flex:1; padding:12px; border:1px solid #ddd; border-radius:12px; font-size:16px; font-weight:700;">
      사진으로 바로답
    </button>
  </div>

  <!-- 메인 실행 버튼 -->
  <button
    id="go"
    style="margin-top:12px; width:100%; padding:12px; border:0; border-radius:12px; font-size:16px; font-weight:700; background:#000; color:#fff;">
    바로답
  </button>

  <!-- 결과 영역 -->
  <div
    id="result"
    style="margin-top:16px; padding:14px; border-radius:12px; border:1px solid #eee; display:none;"
  ></div>

<script>
  const textEl = document.getElementById('text');
  const imgEl = document.getElementById('img');
  const goBtn = document.getElementById('go');
  const resultEl = document.getElementById('result');

  let hasResult = false;

  // 메인 버튼 동작
  goBtn.onclick = async () => {
    if (hasResult) {
      // 새 문장 넣기
      textEl.value = "";
      imgEl.value = "";
      resultEl.style.display = "none";
      goBtn.textContent = "바로답";
      hasResult = false;
      return;
    }

    const text = textEl.value.trim();
    if (!text) {
      alert("문장을 붙여넣거나 사진을 선택하세요.");
      return;
    }

    resultEl.style.display = "block";
    resultEl.innerHTML = "처리 중입니다…";

    // TODO: 실제 API 호출 연결
    setTimeout(() => {
      resultEl.innerHTML = `
        <b>정의:</b> 확인이 필요한 안내 메시지입니다.<br><br>
        <b>중요도:</b> 즉시 조치가 필요하지는 않지만 주의가 필요합니다.<br><br>
        <b>행동:</b> 발신 기관 이름과 취소/처리 여부를 한 번 더 확인하세요.
      `;
      goBtn.textContent = "새 문장 넣기";
      hasResult = true;
    }, 800);
  };

  // 사진 선택 시 → OCR 흐름 진입 (지금은 자리만)
  imgEl.onchange = () => {
    if (imgEl.files.length > 0) {
      resultEl.style.display = "block";
      resultEl.innerHTML = "사진을 분석 중입니다…";
      goBtn.textContent = "새 문장 넣기";
      hasResult = true;
    }
  };
</script>

</body>
</html>
